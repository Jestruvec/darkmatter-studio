---
import { Menu, Home, BadgeInfo, Image, Star, Mail, X } from 'lucide-astro';
---

<header class="bg-gray-50 shadow z-50 sticky top-0">
  <nav
    class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center"
    aria-label="Main Navigation"
  >
    <a
      href="#"
      aria-label="Ir a inicio"
      class="text-2xl font-bold text-gray-800 flex items-center gap-2"
    >
      <img
        src="images/tesseract.webp"
        alt="DarkMatter Studio Icon"
        class="w-10 h-10"
      />
      DarkMatter Studio
    </a>

    <!-- Botón hamburger -->
    <button
      id="menuBtn"
      class="md:hidden p-2 hover:bg-gray-100 rounded cursor-pointer focus:outline-none focus:ring"
      aria-controls="mobileMenu"
      aria-expanded="false"
      aria-label="Abrir menú"
    >
      <Menu />
    </button>

    <!-- Menú normal -->
    <ul class="hidden md:flex gap-6 font-semibold">
      <li>
        <a href="#hero" class="flex items-center gap-1 hover:text-blue-800"
          ><Home />Inicio</a
        >
      </li>
      <li>
        <a href="#services" class="flex items-center gap-1 hover:text-blue-800"
          ><Star />Servicios</a
        >
      </li>
      <li>
        <a href="#projects" class="flex items-center gap-1 hover:text-blue-800"
          ><Image />Proyectos</a
        >
      </li>
      <li>
        <a href="#about" class="flex items-center gap-1 hover:text-blue-800"
          ><BadgeInfo />Nosotros</a
        >
      </li>
      <li>
        <a href="#contact" class="flex items-center gap-1 hover:text-blue-800"
          ><Mail />Contacto</a
        >
      </li>
    </ul>
  </nav>

  <!-- Menú lateral móvil -->
  <div
    id="mobileMenu"
    class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform -translate-x-full transition-transform duration-300 ease-in-out z-50"
    role="dialog"
    aria-modal="true"
    aria-label="Menú móvil"
  >
    <button
      id="closeBtn"
      class="p-4 cursor-pointer hover:bg-gray-100"
      aria-label="Cerrar menú"
    >
      <X />
    </button>

    <ul class="flex flex-col gap-6 p-6 text-lg font-semibold" role="menu">
      <li>
        <a
          role="menuitem"
          href="#hero"
          class="flex items-center gap-1 hover:text-blue-800"><Home />Inicio</a
        >
      </li>
      <li>
        <a
          role="menuitem"
          href="#services"
          class="flex items-center gap-1 hover:text-blue-800"
          ><Star />Servicios</a
        >
      </li>
      <li>
        <a
          role="menuitem"
          href="#projects"
          class="flex items-center gap-1 hover:text-blue-800"
          ><Image />Proyectos</a
        >
      </li>
      <li>
        <a
          role="menuitem"
          href="#about"
          class="flex items-center gap-1 hover:text-blue-800"
          ><BadgeInfo />Nosotros</a
        >
      </li>
      <li>
        <a
          role="menuitem"
          href="#contact"
          class="flex items-center gap-1 hover:text-blue-800"
          ><Mail />Contacto</a
        >
      </li>
    </ul>
  </div>

  <!-- Script inline -->
  <script type="module" is:inline>
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const closeBtn = document.getElementById('closeBtn');

    const openMenu = () => {
      mobileMenu.classList.remove('-translate-x-full');
      menuBtn.setAttribute('aria-expanded', 'true');
    };

    const closeMenu = () => {
      mobileMenu.classList.add('-translate-x-full');
      menuBtn.setAttribute('aria-expanded', 'false');
    };

    menuBtn.addEventListener('click', openMenu);
    closeBtn.addEventListener('click', closeMenu);

    // Accesibilidad extra: cerrar con ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });
  </script>
</header>
